import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton
from aiogram.utils import executor

API_TOKEN = '8106535143:AAGSR0KSDZV5v-3P2MztneZ-e7gxA7ArOk8'


bot = Bot(token=API_TOKEN)
dp = Dispatcher(bot)

# –ü–∞–º—è—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ (–≤ –±—É–¥—É—â–µ–º –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î)
user_data = {}

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
main_menu = ReplyKeyboardMarkup(
    keyboard=[
        [KeyboardButton("üëÜ –ö–ª–∏–∫–Ω—É—Ç—å")],
        [KeyboardButton("üí∞ –ë–∞–ª–∞–Ω—Å")],
    ],
    resize_keyboard=True
)

@dp.message_handler(commands=['start'])
async def start_game(message: types.Message):
    user_id = message.from_user.id
    if user_id not in user_data:
        user_data[user_id] = {"balance": 0}
    await message.answer(
        "üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Abdul Crypto Clicker Bot!\n"
        "–ù–∞–∂–∏–º–∞–π 'üëÜ –ö–ª–∏–∫–Ω—É—Ç—å' —á—Ç–æ–±—ã –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫—Ä–∏–ø—Ç—É!",
        reply_markup=main_menu
    )

@dp.message_handler(lambda message: message.text == "üëÜ –ö–ª–∏–∫–Ω—É—Ç—å")
async def click_handler(message: types.Message):
    user_id = message.from_user.id
    user_data[user_id]["balance"] += 1
    await message.answer(f"üí∏ –¢—ã –∑–∞—Ä–∞–±–æ—Ç–∞–ª 1 –∫—Ä–∏–ø—Ç—É!\nüíº –¢–≤–æ–π —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: {user_data[user_id]['balance']}")

@dp.message_handler(lambda message: message.text == "üí∞ –ë–∞–ª–∞–Ω—Å")
async def balance_handler(message: types.Message):
    user_id = message.from_user.id
    balance = user_data.get(user_id, {}).get("balance", 0)
    await message.answer(f"üíº –¢–≤–æ–π –±–∞–ª–∞–Ω—Å: {balance} –∫—Ä–∏–ø—Ç—ã.")

if __name__ == '__main__':
    executor.start_polling(dp, skip_updates=True)
